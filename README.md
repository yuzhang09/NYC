# NYC-Parking-and-Camera-Violations
## STA9760-Project01
## Introduction 
The dataset "The Open Parking and Camera Violations(OPCV)" is published at NYC OpenData, and it loaded with all parking and camera violations in NYC from 2016. In this project, I used Socrata API to connect to the OPCV API, and load 2,013,616 rows of data into an ElasticSearch instance with AWS, and do the visualization with Kibana. 

## Code 
My code is written in python and it is in src folder and named "main.py". First, I install and import all of the require libraries and packages, and I set up the evniroment variables, and use argparse to add arguments "page_size" and "num_pages". â€œpages_size" means how many rows to get per page, and it is required when people write the command line. And "num_pages" means how many pages to get in total, and it is optional. Next, I connect to the data source and Elastic Search with Sodapy and Requests modules. I set 1 shards with 1 replicas, and I list the fields with their types that are useful. Then, I use a if statement to check if the "num_pages" exists in the command. If there is no "num_pages" in the command line, then load the entire dataset, each pages would have "page_size" rows, and there would be "entire dataset rows / pages_size" pages in total, and then upload to es. Otherwise, it would load "num_pages" pages, and each pages would have "page_size" rows and upload to es, which I write a for loop to achieve it.

## Visualization
I use Kibana to make graphs. The first graph is Number of total rows. There are 2,013,616 rows in total I uploaded to ES. The second graph is number of violations by license types, and "PAS" license has the highest number, and "COM" is the second one. The third graph is number of violations by violation types, and it shows that people is most usually to get "PHTO SCHOOL ZN SPEED VIOLATION" tickets, and "NO PARKING-STREET CLEANING" is the second one. The fourth graph is number of violations in counties, and "NY" county has the highest number of violations, which means Manhattan has the highest number of violations. The last graph is Average reduction amount in county, and it shows "NY" county has the highest average reduction amount, which means Manhattan has the highest average reduction amount. 
Based on those graphs, drivers should pay attention to the speed when we drive through school zoon area and drive slowly, and pay more attention to the parking-street cleaning signal in the street. And also, drivers who are in Manhattan should be careful since the high violaton amount. 
